function collapseNavbar(){$(".navbar").offset().top>50?$(".navbar-fixed-top").addClass("top-nav-collapse"):$(".navbar-fixed-top").removeClass("top-nav-collapse")}function initMap(){var e="img/map-cake-layered.png",t="img/map-church.png",s=[{featureType:"all",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"administrative",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"administrative.country",elementType:"all",stylers:[{visibility:"on"}]},{featureType:"administrative.locality",elementType:"all",stylers:[{visibility:"on"}]},{featureType:"landscape",elementType:"all",stylers:[{visibility:"on"}]},{featureType:"landscape",elementType:"geometry",stylers:[{visibility:"off"}]},{featureType:"landscape",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"poi",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"all",stylers:[{visibility:"on"}]},{featureType:"road",elementType:"geometry",stylers:[{visibility:"on"}]},{featureType:"road",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"all",stylers:[{visibility:"off"}]}],a=new google.maps.LatLng(56.8113344,14.8319706),i=new google.maps.LatLng(56.8113344,14.8319706),o=new google.maps.LatLng(56.7672869,14.8170383),n=new google.maps.Map(document.getElementById("map"),{zoom:11,center:a,disableDefaultUI:!0,scrollwheel:!0,draggable:!0,styles:s});new google.maps.Marker({position:i,map:n,icon:e}),new google.maps.Marker({position:o,map:n,icon:t});var l=new google.maps.InfoWindow({map:n});navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(e){var t={lat:e.coords.latitude,lng:e.coords.longitude};l.setPosition(t),l.setContent("Du befinner dig här!")}),google.maps.event.addDomListener(window,"resize",function(){n.setCenter(a)})}var API_HOST="";$(window).scroll(collapseNavbar),$(document).ready(collapseNavbar);var loadBussForm=function(){if(window.location.hash.search("#uid=")!=-1){var e=window.location.hash.substring(5);$("#rsvp-addition").find("form").data("uid",e),$.ajax({type:"GET",url:API_HOST+"/rsvps/"+e,contentType:"application/json",dataType:"json"}).success(function(e){$("#name-info").val(e.name),null!==e.bussHome&&(e.bussHome?$("#buss-home-true").attr("checked",!0):$("#buss-home-false").attr("checked",!0)),null!==e.bussTo&&(e.bussTo?$("#buss-to-true").attr("checked",!0):$("#buss-to-false").attr("checked",!0)),$("#rsvp-addition").removeClass("hidden")})}};$(function(){$("a.page-scroll").bind("click",function(e){var t=$(this);$("html, body").stop().animate({scrollTop:$(t.attr("href")).offset().top},1500,"easeInOutExpo"),e.preventDefault()}),loadBussForm(),$(window).on("hashchange",function(){loadBussForm()})});var submitValidate=function(e){$(this).find(".has-error").removeClass("has-error");var t=$(e).find("input[type=text][required]").filter(function(){return""==this.value}),s=0==$(e).find("input[name=buss-to]:checked").length,a=0==$(e).find("input[name=buss-home]:checked").length,i=!0;return(s||a)&&($("#buss-choice").addClass("has-error"),i=!1),t.length>0&&(t.each(function(){$(this).closest(".form-group").addClass("has-error")}),i=!1),i};$("#rsvp-addition").on("submit","form",function(e){if(e.preventDefault(),$(this).data("uid")){if(submitValidate(this)){$("html, body").stop().animate({scrollTop:$(e.currentTarget).closest("section").offset().top},1e3,"easeInOutExpo");var t={bussTo:$(this).find("#buss-to-true").is(":checked"),bussHome:$(this).find("#buss-home-true").is(":checked")};$.ajax({type:"POST",url:API_HOST+"/update/"+$(this).data("uid"),data:JSON.stringify(t),success:function(e){$("#rsvp-addition").addClass("submitted").on("click",function(){$("#rsvp-addition").addClass("hidden")})},contentType:"application/json",dataType:"json"}).fail(function(e,t){$("#rsvp-addition").addClass("error")})}}else alert("Kan inte hitta användaren!")}),$("#rsvp").on("submit","form",function(e){if(e.preventDefault(),submitValidate(this)){$("html, body").stop().animate({scrollTop:$(e.currentTarget).closest("section").offset().top},1e3,"easeInOutExpo");var t={name:$(this).find("[name=name]").val(),email:$(this).find("[name=email]").val(),phone:$(this).find("[name=phone]").val(),comment:$(this).find("[name=comment]").val(),attending:$(this).find("#rsvp-status1").is(":checked"),bussTo:$(this).find("#buss-to-true").is(":checked"),bussHome:$(this).find("#buss-home-true").is(":checked")};$.ajax({type:"POST",url:API_HOST+"/rsvps",data:JSON.stringify(t),success:function(e){$("#rsvp").addClass("submitted")},contentType:"application/json",dataType:"json"}).fail(function(e,t){$("#rsvp").addClass("error")})}}),$("#submit-rsvp").on("click",function(e){submitValidate($(this).closest("form"))||(e.preventDefault(),e.stopPropagation())}),$("#new-post").on("click",function(e){$(this).closest(".rsvp-form").removeClass("submitted")}),$("#try-again").on("click",function(e){e.preventDefault(),e.stopPropagation(),$(this).closest(".rsvp-form").removeClass("error")}),$(function(){var e=function(){var e=$(".view-marker");0==e.length?$(document).off("scroll.scrollchecker"):e.each(function(){var e=.9*window.screen.availHeight+$(document).scrollTop();$(this).offset().top<e&&($(this).removeClass("view-marker"),setTimeout(function(){$(this).addClass("in-view")}.bind(this),1e3+Math.floor(1500*Math.random())))})};$(document).on("scroll.scrollchecker",e),e()}),$(".navbar-collapse ul li a").click(function(){$(document).width()<768&&$(this).closest(".collapse").collapse("toggle")});